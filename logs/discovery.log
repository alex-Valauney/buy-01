[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------< com.buy01:discovery-service >---------------------
[INFO] Building discovery-service 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.4.0:run (default-cli) > test-compile @ discovery-service >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ discovery-service ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 0 resource from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.13.0:compile (default-compile) @ discovery-service ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ discovery-service ---
[INFO] skip non existing resourceDirectory /home/student/Bureau/Cursus/java/Buy-01/buy-01/microservices/discovery-service/src/test/resources
[INFO] 
[INFO] --- compiler:3.13.0:testCompile (default-testCompile) @ discovery-service ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] <<< spring-boot:3.4.0:run (default-cli) < test-compile @ discovery-service <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.4.0:run (default-cli) @ discovery-service ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.0)

2025-12-16T11:33:35.996+01:00  INFO 6277 --- [discovery-service] [           main] c.b.d.DiscoveryServiceApplication        : Starting DiscoveryServiceApplication using Java 21.0.9 with PID 6277 (/home/student/Bureau/Cursus/java/Buy-01/buy-01/microservices/discovery-service/target/classes started by student in /home/student/Bureau/Cursus/java/Buy-01/buy-01/microservices/discovery-service)
2025-12-16T11:33:36.000+01:00  INFO 6277 --- [discovery-service] [           main] c.b.d.DiscoveryServiceApplication        : No active profile set, falling back to 1 default profile: "default"
2025-12-16T11:33:36.835+01:00  INFO 6277 --- [discovery-service] [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=efe47e51-8cb1-30ea-88cb-ad9999c1a137
2025-12-16T11:33:37.077+01:00  INFO 6277 --- [discovery-service] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8761 (http)
2025-12-16T11:33:37.091+01:00  INFO 6277 --- [discovery-service] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-16T11:33:37.091+01:00  INFO 6277 --- [discovery-service] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.33]
2025-12-16T11:33:37.144+01:00  INFO 6277 --- [discovery-service] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-16T11:33:37.145+01:00  INFO 6277 --- [discovery-service] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1098 ms
2025-12-16T11:33:37.853+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON encoding codec LegacyJacksonJson
2025-12-16T11:33:37.854+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON decoding codec LegacyJacksonJson
2025-12-16T11:33:37.983+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML encoding codec XStreamXml
2025-12-16T11:33:37.983+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML decoding codec XStreamXml
2025-12-16T11:33:38.618+01:00  WARN 6277 --- [discovery-service] [           main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-16T11:33:38.634+01:00  INFO 6277 --- [discovery-service] [           main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-12-16T11:33:38.648+01:00  INFO 6277 --- [discovery-service] [           main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-12-16T11:33:38.648+01:00  INFO 6277 --- [discovery-service] [           main] com.netflix.discovery.DiscoveryClient    : Client configured to neither register nor query for data.
2025-12-16T11:33:38.650+01:00  INFO 6277 --- [discovery-service] [           main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1765881218649 with initial instances count: 0
2025-12-16T11:33:38.682+01:00  INFO 6277 --- [discovery-service] [           main] c.n.eureka.DefaultEurekaServerContext    : Initializing ...
2025-12-16T11:33:38.683+01:00  INFO 6277 --- [discovery-service] [           main] c.n.eureka.cluster.PeerEurekaNodes       : Adding new peer nodes [http://localhost:8761/eureka/]
2025-12-16T11:33:38.780+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON encoding codec LegacyJacksonJson
2025-12-16T11:33:38.780+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON decoding codec LegacyJacksonJson
2025-12-16T11:33:38.780+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML encoding codec XStreamXml
2025-12-16T11:33:38.780+01:00  INFO 6277 --- [discovery-service] [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML decoding codec XStreamXml
2025-12-16T11:33:38.808+01:00  INFO 6277 --- [discovery-service] [           main] c.n.eureka.cluster.PeerEurekaNodes       : Replica node URL:  http://localhost:8761/eureka/
2025-12-16T11:33:38.816+01:00  INFO 6277 --- [discovery-service] [           main] c.n.e.registry.AbstractInstanceRegistry  : Finished initializing remote region registries. All known remote regions: []
2025-12-16T11:33:38.816+01:00  INFO 6277 --- [discovery-service] [           main] c.n.eureka.DefaultEurekaServerContext    : Initialized
2025-12-16T11:33:38.826+01:00  INFO 6277 --- [discovery-service] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-12-16T11:33:38.864+01:00  INFO 6277 --- [discovery-service] [           main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application DISCOVERY-SERVICE with eureka with status UP
2025-12-16T11:33:38.873+01:00  INFO 6277 --- [discovery-service] [       Thread-9] o.s.c.n.e.server.EurekaServerBootstrap   : isAws returned false
2025-12-16T11:33:38.873+01:00  INFO 6277 --- [discovery-service] [       Thread-9] o.s.c.n.e.server.EurekaServerBootstrap   : Initialized server context
2025-12-16T11:33:38.873+01:00  INFO 6277 --- [discovery-service] [       Thread-9] c.n.e.r.PeerAwareInstanceRegistryImpl    : Got 1 instances from neighboring DS node
2025-12-16T11:33:38.873+01:00  INFO 6277 --- [discovery-service] [       Thread-9] c.n.e.r.PeerAwareInstanceRegistryImpl    : Renew threshold is: 1
2025-12-16T11:33:38.873+01:00  INFO 6277 --- [discovery-service] [       Thread-9] c.n.e.r.PeerAwareInstanceRegistryImpl    : Changing status to UP
2025-12-16T11:33:38.876+01:00  INFO 6277 --- [discovery-service] [       Thread-9] e.s.EurekaServerInitializerConfiguration : Started Eureka Server
2025-12-16T11:33:38.880+01:00  INFO 6277 --- [discovery-service] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8761 (http) with context path '/'
2025-12-16T11:33:38.881+01:00  INFO 6277 --- [discovery-service] [           main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8761
2025-12-16T11:33:38.893+01:00  INFO 6277 --- [discovery-service] [           main] c.b.d.DiscoveryServiceApplication        : Started DiscoveryServiceApplication in 3.289 seconds (process running for 3.77)
2025-12-16T11:34:13.496+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-16T11:34:13.496+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-16T11:34:13.500+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-12-16T11:34:14.021+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-3] c.n.e.registry.AbstractInstanceRegistry  : Registered instance MEDIA-SERVICE/studentHP.localdomain:media-service:8083 with status UP (replication=false)
2025-12-16T11:34:14.021+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-4] c.n.e.registry.AbstractInstanceRegistry  : Registered instance GATEWAY-SERVICE/studentHP.localdomain:gateway-service:8080 with status UP (replication=false)
2025-12-16T11:34:14.243+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-6] c.n.e.registry.AbstractInstanceRegistry  : Registered instance PRODUCT-SERVICE/studentHP.localdomain:product-service:8082 with status UP (replication=false)
2025-12-16T11:34:14.427+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-8] c.n.e.registry.AbstractInstanceRegistry  : Registered instance USER-SERVICE/studentHP.localdomain:user-service:8081 with status UP (replication=false)
2025-12-16T11:34:14.695+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-9] c.n.e.registry.AbstractInstanceRegistry  : Registered instance MEDIA-SERVICE/studentHP.localdomain:media-service:8083 with status UP (replication=true)
2025-12-16T11:34:14.696+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-9] c.n.e.registry.AbstractInstanceRegistry  : Registered instance GATEWAY-SERVICE/studentHP.localdomain:gateway-service:8080 with status UP (replication=true)
2025-12-16T11:34:14.696+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-9] c.n.e.registry.AbstractInstanceRegistry  : Registered instance PRODUCT-SERVICE/studentHP.localdomain:product-service:8082 with status UP (replication=true)
2025-12-16T11:34:14.697+01:00  INFO 6277 --- [discovery-service] [nio-8761-exec-9] c.n.e.registry.AbstractInstanceRegistry  : Registered instance USER-SERVICE/studentHP.localdomain:user-service:8081 with status UP (replication=true)
2025-12-16T11:34:38.874+01:00  INFO 6277 --- [discovery-service] [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms
2025-12-16T11:35:38.875+01:00  INFO 6277 --- [discovery-service] [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms
2025-12-16T11:36:05.744+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application DISCOVERY-SERVICE with eureka with status DOWN
2025-12-16T11:36:05.748+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-12-16T11:36:05.754+01:00  INFO 6277 --- [discovery-service] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-12-16T11:36:05.766+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] o.s.c.n.e.server.EurekaServerBootstrap   : Shutting down Eureka Server..
2025-12-16T11:36:05.767+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] c.n.eureka.DefaultEurekaServerContext    : Shutting down ...
2025-12-16T11:36:05.785+01:00 ERROR 6277 --- [discovery-service] [t-Conn-Cleaner2] c.n.d.s.t.j.EurekaJersey3ClientImpl      : Cannot clean connections

java.lang.IllegalStateException: Client instance has been closed.
	at org.glassfish.jersey.internal.guava.Preconditions.checkState(Preconditions.java:169) ~[jersey-common-3.1.9.jar:na]
	at org.glassfish.jersey.client.JerseyClient.checkNotClosed(JerseyClient.java:248) ~[jersey-client-3.1.9.jar:na]
	at org.glassfish.jersey.client.JerseyClient.getConfiguration(JerseyClient.java:363) ~[jersey-client-3.1.9.jar:na]
	at org.glassfish.jersey.client.JerseyClient.getConfiguration(JerseyClient.java:54) ~[jersey-client-3.1.9.jar:na]
	at com.netflix.discovery.shared.transport.jersey3.EurekaJersey3ClientImpl$ConnectionCleanerTask.run(EurekaJersey3ClientImpl.java:338) ~[eureka-client-jersey3-2.0.5.jar:2.0.5]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[na:na]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-12-16T11:36:05.792+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] c.n.eureka.DefaultEurekaServerContext    : Shut down
2025-12-16T11:36:05.792+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] o.s.c.n.e.server.EurekaServerBootstrap   : Eureka Service is now shutdown...
2025-12-16T11:36:05.793+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] c.n.eureka.DefaultEurekaServerContext    : Shutting down ...
2025-12-16T11:36:05.793+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] c.n.eureka.DefaultEurekaServerContext    : Shut down
2025-12-16T11:36:05.802+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2025-12-16T11:36:05.802+01:00  INFO 6277 --- [discovery-service] [ionShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
